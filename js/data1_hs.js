var dataSrcsTypeServer = {
    product:[{id:'1',name:'美食'},{id:'2',name:'二手'}],
    article:[{id:'1',name:'新闻'},{id:'2',name:'活动'}]
};
var dataSrcsServer = {
    product:{
        
          '0':[
              {title: '商品名称1',summary: '商品描述1',date: '2016-10-01',price:'100.00',selled:'12'},
              {title: '商品名称2',summary: '商品描述2',date: '2016-10-02',price:'200.00',selled:'2345'},
              {title: '商品名称3',summary: '商品描述3',date: '2016-10-03',price:'300.00',selled:'367'},
              {title: '商品名称4',summary: '商品描述4',date: '2016-10-04',price:'400.00',selled:'4890'},
              {title: '商品名称5',summary: '商品描述5',date: '2016-10-05',price:'500.00',selled:'512'},
              {title: '商品名称6',summary: '商品描述6',date: '2016-10-06',price:'600.00',selled:'612'},
              {title: '商品名称7',summary: '商品描述7',date: '2016-10-07',price:'700.00',selled:'712'},
              {title: '商品名称8',summary: '商品描述8',date: '2016-10-08',price:'800.00',selled:'812'},
              {title: '商品名称9',summary: '商品描述9',date: '2016-10-09',price:'900.00',selled:'912'},
              {title: '商品名称10',summary: '商品描述10',date: '2016-10-10',price:'1000.00',selled:'1012'}
          ],  
        
        
          '1':[
              {title: '美食商品1',summary: '美食描述描述描述描述描述描述1',date: '2016-11-01',price:'100.00',selled:'11'},
              {title: '美食商品2',summary: '美食描述描述描述描述描述描述2',date: '2016-11-02',price:'200.00',selled:'22'},
              {title: '美食商品3',summary: '美食描述描述描述描述描述描述3',date: '2016-11-03',price:'300.00',selled:'33'},
              {title: '美食商品4',summary: '美食描述描述描述描述描述描述4',date: '2016-11-04',price:'400.00',selled:'44'},
              {title: '美食商品5',summary: '美食描述描述描述描述描述描述5',date: '2016-11-05',price:'500.00',selled:'55'},
              {title: '美食商品6',summary: '美食描述描述描述描述描述描述6',date: '2016-11-06',price:'600.00',selled:'66'},
              {title: '美食商品7',summary: '美食描述描述描述描述描述描述7',date: '2016-11-07',price:'700.00',selled:'77'},
              {title: '美食商品8',summary: '美食描述描述描述描述描述描述8',date: '2016-11-08',price:'800.00',selled:'88'},
              {title: '美食商品9',summary: '美食描述描述描述描述描述描述9',date: '2016-11-09',price:'900.00',selled:'99'},
              {title: '美食商品10',summary: '美食描述描述描述描述描述描述10',date: '2016-11-10',price:'1000.00',selled:'1010'}
          ], 
       
       
          '2':[
              {title: '二手商品1',summary: '二手描述描述描述描述描述描述1',date: '2016-12-01',price:'100.00',selled:'10'},
              {title: '二手商品2',summary: '二手描述描述描述描述描述描述2',date: '2016-12-02',price:'200.00',selled:'20'},
              {title: '二手商品3',summary: '二手描述描述描述描述描述描述3',date: '2016-12-03',price:'300.00',selled:'30'},
              {title: '二手商品4',summary: '二手描述描述描述描述描述描述4',date: '2016-12-04',price:'400.00',selled:'40'},
              {title: '二手商品5',summary: '二手描述描述描述描述描述描述5',date: '2016-12-05',price:'500.00',selled:'50'},
              {title: '二手商品6',summary: '二手描述描述描述描述描述描述6',date: '2016-12-06',price:'600.00',selled:'60'},
              {title: '二手商品7',summary: '二手描述描述描述描述描述描述7',date: '2016-12-07',price:'700.00',selled:'70'},
              {title: '二手商品8',summary: '二手描述描述描述描述描述描述8',date: '2016-12-08',price:'800.00',selled:'80'},
              {title: '二手商品9',summary: '二手描述描述描述描述描述描述9',date: '2016-12-09',price:'900.00',selled:'90'},
              {title: '二手商品10',summary: '二手描述描述描述描述描述描述10',date: '2016-12-10',price:'1000.00',selled:'100'}
          ]  
      
    },
    article:{
       
          '0':[
              {title: '文章 1',summary: '文章摘要',date: '2015-10-01',visited:'123'},
              {title: '文章 2',summary: '文章摘要',date: '2015-10-02',visited:'223'},
              {title: '文章 3',summary: '文章摘要',date: '2015-10-03',visited:'323'},
              {title: '文章 4',summary: '文章摘要',date: '2015-10-04',visited:'423'},
              {title: '文章 5',summary: '文章摘要',date: '2015-10-05',visited:'523'},
              {title: '文章 6',summary: '文章摘要',date: '2015-10-06',visited:'623'},
              {title: '文章 7',summary: '文章摘要',date: '2015-10-07',visited:'723'},
              {title: '文章 8',summary: '文章摘要',date: '2015-10-08',visited:'823'},
              {title: '文章 9',summary: '文章摘要',date: '2015-10-09',visited:'923'},
              {title: '文章 10',summary: '文章摘要',date: '2015-10-10',visited:'1023'}
          ],  
       
       
          '1':[
              {title: '新闻标题1',summary: '新闻摘要摘要摘要摘要摘要摘要1',date: '2015-11-01',visited:'123'},
              {title: '新闻标题2',summary: '新闻摘要摘要摘要摘要摘要摘要2',date: '2015-11-02',visited:'123'},
              {title: '新闻标题3',summary: '新闻摘要摘要摘要摘要摘要摘要3',date: '2015-11-03',visited:'123'},
              {title: '新闻标题4',summary: '新闻摘要摘要摘要摘要摘要摘要4',date: '2015-11-04',visited:'123'},
              {title: '新闻标题5',summary: '新闻摘要摘要摘要摘要摘要摘要5',date: '2015-11-05',visited:'123'},
              {title: '新闻标题6',summary: '新闻摘要摘要摘要摘要摘要摘要6',date: '2015-11-06',visited:'123'},
              {title: '新闻标题7',summary: '新闻摘要摘要摘要摘要摘要摘要7',date: '2015-11-07',visited:'123'},
              {title: '新闻标题8',summary: '新闻摘要摘要摘要摘要摘要摘要8',date: '2015-11-08',visited:'123'},
              {title: '新闻标题9',summary: '新闻摘要摘要摘要摘要摘要摘要9',date: '2015-11-09',visited:'123'},
              {title: '新闻标题10',summary: '新闻摘要摘要摘要摘要摘要摘要10',date: '2015-11-10',visited:'123'}
          ],  
     
       
          '2':[
              {title: '活动标题1',summary: '活动摘要摘要摘要摘要摘要摘要1',date: '2015-12-01',visited:'123'},
              {title: '活动标题2',summary: '活动摘要摘要摘要摘要摘要摘要2',date: '2015-12-02',visited:'123'},
              {title: '活动标题3',summary: '活动摘要摘要摘要摘要摘要摘要3',date: '2015-12-03',visited:'123'},
              {title: '活动标题4',summary: '活动摘要摘要摘要摘要摘要摘要4',date: '2015-12-04',visited:'123'},
              {title: '活动标题5',summary: '活动摘要摘要摘要摘要摘要摘要5',date: '2015-12-05',visited:'123'},
              {title: '活动标题6',summary: '活动摘要摘要摘要摘要摘要摘要6',date: '2015-12-06',visited:'123'},
              {title: '活动标题7',summary: '活动摘要摘要摘要摘要摘要摘要7',date: '2015-12-07',visited:'123'},
              {title: '活动标题8',summary: '活动摘要摘要摘要摘要摘要摘要8',date: '2015-12-08',visited:'123'},
              {title: '活动标题9',summary: '活动摘要摘要摘要摘要摘要摘要9',date: '2015-12-09',visited:'123'},
              {title: '活动标题10',summary: '活动摘要摘要摘要摘要摘要摘要10',date: '2015-12-10',visited:'123'}
          ]  
       
    }
};
var imageSrcAll = [
    {id:'1',title:'图片1',url:'images/imagesrc/1.jpg'},
    {id:'2',title:'图片2',url:'images/imagesrc/2.jpg'},
    {id:'3',title:'图片3',url:'images/imagesrc/3.jpg'},
    {id:'4',title:'图片4',url:'images/imagesrc/4.jpg'},
    {id:'5',title:'图片5',url:'images/imagesrc/5.jpg'},
    {id:'6',title:'图片6',url:'images/imagesrc/6.jpg'},
    {id:'7',title:'图片7',url:'images/imagesrc/7.jpg'},
    {id:'8',title:'图片8',url:'images/imagesrc/8.jpg'},
    {id:'9',title:'图片9',url:'images/imagesrc/9.jpg'},
    {id:'10',title:'图片10',url:'images/imagesrc/10.jpg'},
    {id:'11',title:'图片11',url:'images/imagesrc/11.jpg'},
    {id:'12',title:'图片12',url:'images/imagesrc/12.jpg'},
    {id:'13',title:'图片13',url:'images/imagesrc/13.jpg'},
    {id:'14',title:'图片14',url:'images/imagesrc/14.jpg'},
    {id:'15',title:'图片15',url:'images/imagesrc/15.jpg'},
    {id:'16',title:'图片16',url:'images/imagesrc/16.jpg'},
    {id:'17',title:'图片17',url:'images/imagesrc/17.jpg'},
    {id:'18',title:'图片18',url:'images/imagesrc/18.jpg'},
    {id:'19',title:'图片19',url:'images/imagesrc/19.jpg'},
    {id:'20',title:'图片20',url:'images/imagesrc/20.jpg'},
    {id:'21',title:'图片21',url:'images/imagesrc/21.jpg'},
    {id:'22',title:'图片22',url:'images/imagesrc/22.jpg'},
    {id:'23',title:'图片23',url:'images/imagesrc/23.jpg'},
    {id:'24',title:'图片24',url:'images/imagesrc/24.jpg'},
    {id:'25',title:'图片25',url:'images/imagesrc/25.jpg'},
    {id:'26',title:'图片26',url:'images/imagesrc/26.jpg'},
    {id:'27',title:'图片27',url:'images/imagesrc/27.jpg'},
    {id:'28',title:'图片28',url:'images/imagesrc/28.jpg'},
    {id:'29',title:'图片29',url:'images/imagesrc/29.jpg'},
    {id:'30',title:'图片30',url:'images/imagesrc/10.jpg'},
    {id:'31',title:'图片31',url:'images/imagesrc/31.jpg'},
    {id:'32',title:'图片32',url:'images/imagesrc/32.jpg'},
    {id:'33',title:'图片33',url:'images/imagesrc/33.jpg'},
    {id:'34',title:'图片34',url:'images/imagesrc/34.jpg'},
    {id:'35',title:'图片35',url:'images/imagesrc/35.jpg'},
    {id:'36',title:'图片36',url:'images/imagesrc/36.jpg'},
    {id:'37',title:'图片37',url:'images/imagesrc/37.jpg'},
    {id:'38',title:'图片38',url:'images/imagesrc/38.jpg'},
    {id:'39',title:'图片39',url:'images/imagesrc/39.jpg'},
    {id:'40',title:'图片40',url:'images/imagesrc/40.jpg'},
    {id:'41',title:'图片41',url:'images/imagesrc/41.jpg'},
    {id:'42',title:'图片42',url:'images/imagesrc/42.jpg'},
    {id:'43',title:'图片43',url:'images/imagesrc/43.jpg'},
    {id:'44',title:'图片44',url:'images/imagesrc/44.png'},
    {id:'45',title:'图片45',url:'images/imagesrc/45.png'},
    {id:'46',title:'图片46',url:'images/imagesrc/46.png'},
    {id:'47',title:'图片47',url:'images/imagesrc/47.png'},
    {id:'48',title:'图片48',url:'images/imagesrc/48.png'},
    {id:'49',title:'图片49',url:'images/imagesrc/49.png'},
    {id:'50',title:'图片50',url:'images/imagesrc/50.png'},
    {id:'51',title:'图片51',url:'images/imagesrc/51.png'},
    {id:'52',title:'图片52',url:'images/imagesrc/52.png'},
    {id:'53',title:'图片53',url:'images/imagesrc/53.png'},
    {id:'54',title:'图片54',url:'images/imagesrc/54.png'},
    {id:'55',title:'图片55',url:'images/imagesrc/55.png'},
    {id:'56',title:'图片56',url:'images/imagesrc/56.jpg'},
    {id:'57',title:'图片57',url:'images/imagesrc/57.jpg'},
    {id:'58',title:'图片58',url:'images/imagesrc/58.jpg'},
    {id:'49',title:'图片59',url:'images/imagesrc/59.jpg'},
    {id:'50',title:'图片60',url:'images/imagesrc/60.jpg'},
    {id:'51',title:'图片61',url:'images/imagesrc/61.jpg'},
    {id:'52',title:'图片62',url:'images/imagesrc/62.jpg'},
    {id:'53',title:'图片63',url:'images/imagesrc/63.jpg'},
    {id:'54',title:'图片64',url:'images/imagesrc/64.jpg'},
    {id:'55',title:'图片65',url:'images/imagesrc/65.jpg'},
    {id:'56',title:'图片66',url:'images/imagesrc/66.jpg'},
    {id:'57',title:'图片67',url:'images/imagesrc/67.jpg'},
    {id:'58',title:'图片68',url:'images/imagesrc/68.jpg'},
    {id:'58',title:'图片69',url:'images/imagesrc/69.jpg'},
    {id:'58',title:'图片70',url:'images/imagesrc/70.jpg'},
    {id:'58',title:'图片71',url:'images/imagesrc/71.png'},
    {id:'58',title:'图片72',url:'images/imagesrc/72.jpg'}
];
function AJAXRequestImage(suc,fail,cate,startIdx,cnt){
    var data = [];
    var dataAll = imageSrcAll;
    if(dataAll){
        for(var i=startIdx;i<startIdx+cnt;i++){
            var dataI = dataAll[i];
            if(dataI){
                data.push(dataI);
            }else{
                break;
            }
        }
    }
    var dataStr = JSON.stringify(data);
    setTimeout(function(){
        eval(suc+'(\''+dataStr+'\')');
    },500);
}
function AJAXRequestType(suc,fail,type,customData){
    /*var data = dataSrcsTypeServer[type];
    var dataStr = JSON.stringify(data);
    setTimeout(function(){
        eval(suc+'(\''+dataStr+'\')');
    },500);*/
    if(type=='product'){
        $.ajax({
            type: 'get',
            url: 'http://localhost:1337/getcategory',
            data: {customData:customData},
            dataType: 'json',
            success: suc,
            error: fail
        });
    }else{
        setTimeout(function(){
            eval(fail+'()');
        },500);
    }
}
function AJAXRequestData(suc,fail,type,subType,startIdx,cnt,customData){
    /*var data = [];
    var dataAll = dataSrcsServer[type][subType];
    if(dataAll){
        for(var i=0;i<cnt;i++){
            var dataI = dataAll[i];
            if(dataI){
                data.push(dataI);
            }else{
                break;
            }
        }
    }
    var dataStr = JSON.stringify(data);
    setTimeout(function(){
        eval(suc+'(\''+dataStr+'\')');
    },500);*/
    customData==undefined?{}:customData;
    customData = JSON.stringify(customData);
    if(type=='product'){
        $.ajax({
            type: 'get',
            url: 'http://localhost:1337/detail',
            data: {type:subType,startIdx:0,count:cnt,customData:customData},
            dataType: 'json',
            success: suc,
            error: fail
        });
    }else{
        setTimeout(function(){
            eval(fail+'()');
        },500);
    }
}
function AJAXRequestPageList(callback,siteId){
	console.log(siteId);
  /** var data = {
        statu:1,
        homePage:{
                    id:'1',
                    header:{"id":"1",show:1,"children":[{"type":"grid","containers":[{"width":"15%","children":[{"type":"icon","align":"center","id":"13","shape":"bars","color":"rgb(0, 128, 255)","padding":"5px 0px 0px","linkType":"menu","linkSubtype":"menu_l"}]},{"width":"70%","children":[{"type":"text","align":"center","ispagename":0,"html":"主页","padding":"14px 0px 0px","id":"12"}]},{"width":"15%"}],"id":"11"}]},
                    leftmenu:{id:'2'},
                    rightmenu:{id:'3'},
                    footer:{id:'4',show:0},
                    children:[]
                },
        pageList:[
            {id:'1',name:'页面 1',pUrl:'www.xxx.com'},
            {id:'2',name:'页面 2',pUrl:'www.xxx.com'},
            {id:'3',name:'页面 3',pUrl:'www.xxx.com'}
        ]
    }; **/
	

	var  	rows=[];
	
	 var data = {
      statu:0,
      homePage:{},
       pageList:rows
    };
    
    var params = {
 			'siteId':siteId
 			
		};
    var rootPath=$("#rootPath").val();
   
	$.ajax({
	type: "GET",
	url: rootPath+"/site/pageList.action?t="+new Date().getTime(),
	data: params,
	dataType:'json',
	async : false,
	success: function(res){
	var  list=res.pageList;
	if(list!=''){
		data.statu=1;
		for(var  i=0;i<list.length;i++){
			var page=list[i];
			
			//设置主页
			if(page.isHomepage==1){
				
				
				data.homePage=JSON.parse(page.pageData);
				
			}
			
			var id=page.id;
			var name=page.name;
			var pUrl=page.priviewURL;
			rows.push(createJson(id,name,pUrl)); 
			
			
			
		}
	}
         
	}
	});
	
	//回调处理
	  var dataStr = JSON.stringify(data);
	 
	    setTimeout(function(){
	        eval(callback+'(\''+dataStr+'\')');
	    },500);

}

 function createJson(id,name,pUrl) 
{
	var jsonStr = {};
	jsonStr.id = id;
	jsonStr.name = name;
	jsonStr.pUrl = pUrl;
	return jsonStr;

}
function AJAXRequestPage(callback,pageId){
    var name = '页面'+pageId;
    var statu = 1;
    if(pageId=='2'){
        statu = 0;
    }
    var data = {
                    statu:statu,
                    pageId:pageId,
                    page:{
                        id:pageId,
                        header:{"id":"1",show:1,"children":[{"type":"grid","containers":[{"width":"15%","children":[{"type":"icon","align":"center","id":"13","shape":"bars","color":"rgb(0, 128, 255)","padding":"5px 0px 0px","linkType":"menu","linkSubtype":"menu_l"}]},{"width":"70%","children":[{"type":"text","align":"center","ispagename":0,"html":name,"padding":"14px 0px 0px","id":"12"}]},{"width":"15%"}],"id":"11"}]},
                        leftmenu:{id:'2'},
                        rightmenu:{id:'3'},
                        footer:{id:'4',show:0},
                        children:[]
                    }
                };
    var dataStr = JSON.stringify(data);
    setTimeout(function(){
        eval(callback+'(\''+dataStr+'\')');
    },500);
}
/**
 * 添加页面
 * @param callback
 * @param pData
 * @returns
 */
function AJAXRequestAddPage(callback,pData){
	 var data ={};
	 var params = {
	 			'pageName':pData.name,
	 			'pageData':JSON.stringify(pData),
	 			'siteId':$("#siteId").val()
	 			
			};
	    var rootPath=$("#rootPath").val();
	  
		$.ajax({
		type: "POST",
		url: rootPath+"/site/addPage.action?t="+new Date().getTime(),
		data: params,
		dataType:'json',
		async : false,
		success: function(ret){
			var  result=ret.result;
			
			data = {
                    statu:result
                };
		
	         
		}
		});
    var dataStr = JSON.stringify(data);
    setTimeout(function(){
        eval(callback+'(\''+dataStr+'\')');
    },500);
}
/**
 * 修改页面名称
 * @param callback
 * @param pageId
 * @param newName
 * @returns
 */
function AJAXRequestRenamePage(callback,pageId,newName){
	
	 var data ={};
	 var params = {
	 			'pageId':pageId,
	 			'newName':newName
	 			
			};
	    var rootPath=$("#rootPath").val();
	  
		$.ajax({
		type: "POST",
		url: rootPath+"/site/modifyPageName.action?t="+new Date().getTime(),
		data: params,
		dataType:'json',
		async : false,
		success: function(ret){
			var  result=ret.result;
			
			data = {
                    statu:result
                };
		
	         
		}
		});
		

    var dataStr = JSON.stringify(data);
    setTimeout(function(){
        eval(callback+'(\''+dataStr+'\')');
    },500);
}
/**
 * 删除页面
 * @param callback
 * @param pageId
 * @returns
 */
function AJAXRequestDeletePage(callback,pageId){
	 var data ={};
	 var params = {
	 			'pageId':pageId
	 			
	 			
			};
	    var rootPath=$("#rootPath").val();
	  
		$.ajax({
		type: "POST",
		url: rootPath+"/site/deletePage.action?t="+new Date().getTime(),
		data: params,
		dataType:'json',
		async : false,
		success: function(ret){
			var  result=ret.result;
			
			data = {
                    statu:result
                };
		
	         
		}
		});
		
    var dataStr = JSON.stringify(data);
    setTimeout(function(){
        eval(callback+'(\''+dataStr+'\')');
    },500);
}
/**
 * 设置主页
 * @param callback
 * @param pageId
 * @returns
 */
function AJAXRequestHomePage(callback,pageId){
	var data ={};
	 var params = {
	 			'pageId':pageId,
	 			'siteId':$("#siteId").val()
	 			
	 			
			};
	    var rootPath=$("#rootPath").val();
	  
		$.ajax({
		type: "POST",
		url: rootPath+"/site/modifyHomepage.action?t="+new Date().getTime(),
		data: params,
		dataType:'json',
		async : false,
		success: function(ret){
			var  result=ret.result;
			
			data = {
                   statu:result
               };
		
	         
		}
		});
    var dataStr = JSON.stringify(data);
    setTimeout(function(){
        eval(callback+'(\''+dataStr+'\')');
    },500);
}
function AJAXRequestSavePage(callback,pData){
    var statu = 1;
    var data = {
                    statu:statu
                };
    var dataStr = JSON.stringify(data);
    setTimeout(function(){
        eval(callback+'(\''+dataStr+'\')');
    },500);
}

